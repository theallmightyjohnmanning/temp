{"code":"!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,\"a\",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p=\"\",n(n.s=3)}([function(t,e,n){\"use strict\";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=void 0;var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),this.freeList=[],this.count=0,this.T=e}var e,n,r;return e=t,(n=[{key:\"aquire\",value:function(){this.freeList.length<=0&&this.expand(Math.round(.2*this.count)+1);var t=this.freeList.pop();return t.__init?t.__init():this.T.call(t),t}},{key:\"release\",value:function(t){this.freeList.push(t)}},{key:\"expand\",value:function(t){for(var e=0;e<t;e++)this.freeList.push(new this.T);this.count+=t}},{key:\"totalSize\",value:function(){return this.count}},{key:\"totalFree\",value:function(){return this.freeList.length}},{key:\"totalUsed\",value:function(){return this.count-this.freeList.length}}])&&i(e.prototype,n),r&&i(e,r),t}();e.default=r},function(t,e,n){\"use strict\";var i;function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=void 0;var a=new(((i=n(0))&&i.__esModule?i:{default:i}).default)(s),s=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),this.x=+e||0,this.y=+n||0}var e,n,i;return e=t,(n=[{key:\"_init\",value:function(){this.clear()}},{key:\"aquire\",value:function(){return a.aquire()}},{key:\"release\",value:function(){return v&&a.release(v),a.count-a.freeList.length}},{key:\"clear\",value:function(){return this.x=this.y=0,this}},{key:\"assign\",value:function(){return this.x=v.x,this.y=v.y,this}},{key:\"equals\",value:function(t){return this.x===t.x&&this.y===t.y}},{key:\"set\",value:function(t,e){return this.x=+t,this.y=+e,this}},{key:\"limit\",value:function(t){return(t=+t)&&this.magnitude()>t?this.normalize(t):this}},{key:\"normalize\",value:function(t){t=t||1;var e=Math.sqrt(this.x*this.x+this.y*this.y);return this.x=t*this.x/e,this.y=t*this.y/e,this}},{key:\"project\",value:function(t){var e=t.dot(this)/t.magnitude2();return this.assign(t).smult(e),this}},{key:\"perp\",value:function(){var t=this.x;return this.x=-this.y,this.y=t,this}},{key:\"lperp\",value:function(){var t=this.x;return this.x=this.y,this.y=-t,this}},{key:\"sub\",value:function(t){return this.x-=t.x,this.y-=t.y,this}},{key:\"add\",value:function(t){return this.x+=t.x,this.y+=t.y,this}},{key:\"subtract\",value:function(e){return new t(this.x-e.x,this.y-e.y)}},{key:\"multiply\",value:function(e){return\"number\"==typeof e?new t(this.x*e,this.y*e):new t(this.x*e.x,this.y*e.y)}},{key:\"divide\",value:function(e){return new t(this.x/e.x,this.y/e.y)}},{key:\"smult\",value:function(t){return t=+t,this.x*=t,this.y*=t,this}},{key:\"rotate\",value:function(t){return this.set(this.x*Math.cos(t)-this.y*Math.sin(t),this.x*Math.sin(t)+this.y*Math.cos(t))}},{key:\"length\",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:\"cross\",value:function(t){return this.x*t.y-this.y*t.x}},{key:\"dot\",value:function(t){return+(this.x*t.x+this.y*t.y)}},{key:\"det\",value:function(t){return+(this.x*t.y-this.y*t.x)}},{key:\"magnitude\",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:\"magnitude2\",value:function(){return this.x*this.x+this.y*this.y}},{key:\"distance\",value:function(e){var n=new t;return n.assign(this).sub(e),n.magnitude()}},{key:\"distance2\",value:function(e){var n=new t;return n.assign(this).sub(e),n.magnitude2()}},{key:\"angle\",value:function(){return Math.atan2(this.y,this.x)}},{key:\"angleBetween\",value:function(t){return Math.atan2(this.det(t),this.dot(t))}},{key:\"pcopy\",value:function(){return Vec2.aquire().assign(this)}},{key:\"copy\",value:function(){return(new Vec2).assign(this)}},{key:\"fromAngle\",value:function(t,e){return e=+e||1,new Vec2(Math.cos(t)*e,Math.sin(t)*e)}},{key:\"pfromAngle\",value:function(t,e){return e=+e||1,Vec2.aquire().set(Math.cos(t)*e,Math.sin(t)*e)}},{key:\"rectIntersect\",value:function(t,e,n,i){var r=t.x+e.x<n.x-i.x,a=t.x-e.x>n.x+i.x,s=t.y+e.y<n.y-i.y,o=t.y-e.y>n.y+i.y;return!(r||a||s||o)}},{key:\"circleIntersect\",value:function(t,e,n,i){var r=(e+i)*(e+i);return t.distance2(n)<=r}},{key:\"rectContains\",value:function(t,e,n,i){return!(t.x-e.x<n.x-i.x)&&(!(t.x+e.x>n.x+i.x)&&(!(t.y-e.y<n.y-i.y)&&!(t.y+e.y>n.y+i.y)))}},{key:\"sizeToHwidth\",value:function(t,e,n,i){i.assign(e).smult(.5),n.assign(t).add(i)}},{key:\"toString\",value:function(){return this.x.toFixed(2)+\",\"+this.y.toFixed(2)}}])&&r(e.prototype,n),i&&r(e,i),t}();e.default=s},function(t,e,n){\"use strict\";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=void 0;var r=function(){function t(e,n,i,r){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),this.x=e,this.y=n,this.w=i,this.h=r}var e,n,r;return e=t,(n=[{key:\"draw\",value:function(t,e){t.beginPath(),t.rect(this.x,this.y,this.w,this.h),t.strokeStyle=e,t.stroke()}},{key:\"pointTest\",value:function(t,e){var n,i;return 1==arguments.length&&(n=t.x,i=t.y),n>=this.x&&n<=this.x+this.w&&i>=this.y&&i<=this.y+this.h}},{key:\"rectangleTest\",value:function(t){return this.x<t.x+t.w&&this.x+this.w>t.x&&this.y<t.y+t.h&&this.y+this.h>t.y}}])&&i(e.prototype,n),r&&i(e,r),t}();e.default=r},function(t,e,n){\"use strict\";var i,r=(i=n(26))&&i.__esModule?i:{default:i};var a=new r.default.graphics.resources,s=new r.default.core.entityManager,o=new r.default.graphics.display({resize:!0}),u=new r.default.core.loop,h=s.create(),l=!1;o.init(function(){a.load([\"https://raw.githubusercontent.com/theallmightyjohnmanning/snm/master/flappy/spritesheet.png\"]),a.onReady(function(){h.transform.position.x=h.transform.position.y=51,function(t){throw new Error('\"'+t+'\" is read-only')}(\"run\"),l=!0}),u.start()}),u.onFixedTick(function(t){l&&(o.clear(),new r.default.physics.circle(h.transform.position.x,h.transform.position.y,20).draw(o.ctx,\"red\"))})},function(t,e,n){\"use strict\";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=void 0;var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t)}var e,n,r;return e=t,r=[{key:\"deg2rad\",value:function(){return Math.PI/180}},{key:\"i2xy\",value:function(t,e){return{x:t%e,y:Math.floor(t/e)}}},{key:\"xy2i\",value:function(t,e,n){return e*n+t}}],(n=null)&&i(e.prototype,n),r&&i(e,r),t}();e.default=r},function(t,e,n){\"use strict\";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=void 0;var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),this.resourceCache={},this.loading=[],this.readyCallbacks=[]}var e,n,r;return e=t,(n=[{key:\"load\",value:function(t){if(t instanceof Array){var e=this;t.forEach(function(t){e._load(t)})}else that._load(t)}},{key:\"_load\",value:function(t){if(this.resourceCache[t])return this.resourceCache[t];var e=new Image,n=this;e.onload=function(){n.resourceCache[t]=e,n.isReady()&&n.readyCallbacks.forEach(function(t){t()})},this.resourceCache[t]=!1,e.src=t}},{key:\"get\",value:function(t){return this.resourceCache[t]}},{key:\"isReady\",value:function(){var t=!0;for(var e in this.resourceCache)this.resourceCache.hasOwnProperty(e)&&!this.resourceCache[e]&&(t=!1);return t}},{key:\"onReady\",value:function(t){this.readyCallbacks.push(t)}}])&&i(e.prototype,n),r&&i(e,r),t}();e.default=r},function(t,e,n){\"use strict\";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=void 0;var r=function(){function t(e,n,i,r,a){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),this.img=e,this.x=n,this.y=i,this.w=r,this.h=a}var e,n,r;return e=t,(n=[{key:\"draw\",value:function(t,e,n){t.drawImage(this.img,this.x,this.y,this.w,this.h,e,n,this.w,this.h)}}])&&i(e.prototype,n),r&&i(e,r),t}();e.default=r},function(t,e,n){\"use strict\";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=void 0;var r=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),this._name=e||\"name\",this._callback=n||null,this._Components=[],this._entity=null}var e,n,r;return e=t,(n=[{key:\"fire\",value:function(t,e,n){if(t!==this._name)return!1;var i=this._Components;return!(e&&e.hasAllComponents&&i.length&&(!e||!e.hasAllComponents(i)))&&((null===this._entity||this._entity===e)&&(this._callback(e,n),!0))}},{key:\"whereEntity\",value:function(t){if(this._entity)throw new Error(\"Cannot call whereEntity twice\");return this._entity=t,this}},{key:\"whereComponent\",value:function(t){return this._Components.push(t),this}},{key:\"whereComponents\",value:function(t){return this._Components=this._Components.concat(t),this}}])&&i(e.prototype,n),r&&i(e,r),t}();e.default=r},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=void 0;var i,r=(i=n(7))&&i.__esModule?i:{default:i};function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),this._events={},this.fired=0,this.handled=0}var e,n,i;return e=t,(n=[{key:\"listenTo\",value:function(t,e){this._events[t]||(this._events[t]=[]);var n=new r.default(t,e);return this._events[t].push(n),n}},{key:\"trigger\",value:function(t,e,n){this.fired++;var i=this._events[t];if(i)for(var r=0;r<i.length;r++){i[r].fire(t,e,n)&&this.handled++}}},{key:\"resetCounters\",value:function(){this.fired=this.handled=0}}])&&a(e.prototype,n),i&&a(e,i),t}();e.default=s},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=void 0;var i,r=(i=n(8))&&i.__esModule?i:{default:i};function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var s={TICK:\"Loop#TICK\",FIXED_TICK:\"Loop#FIXED_TICK\"},o=window,u=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),this.messenger=e||new r.default,this.fixedDuration=8,this.started=!1,this.currentTime=0,this.fixedStepsPerFrame=0,this.fixedTimePerFrame=0,this.renderTimePerFrame=0,this.frameTime=0}var e,n,i;return e=t,(n=[{key:\"start\",value:function(){if(!this.started){var t=0,e=0,n=0,i=this.fixedDuration,r=this.messenger,a=this,u=0,h=0,l=0;requestAnimationFrame(function c(f){requestAnimationFrame(c),l&&(a.frameTime=o.performance.now()-l),l=o.performance.now();var y=t?f-t:0;for(r.resetCounters(),e+=y,a.fixedStepsPerFrame=0,u=o.performance.now();e>=i;)r.trigger(s.FIXED_TICK,i,n),n+=i,e-=i,a.fixedStepsPerFrame++;a.fixedTimePerFrame=o.performance.now()-u,a.currentTime=n,h=o.performance.now(),r.trigger(s.TICK,y,f),a.renderTimePerFrame=o.performance.now()-h,t=f}),this.started=!0}}},{key:\"onTick\",value:function(t){return this.messenger.listenTo(s.TICK,t)}},{key:\"onFixedTick\",value:function(t){return this.messenger.listenTo(s.FIXED_TICK,t)}}])&&a(e.prototype,n),i&&a(e,i),t}();e.default=u},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.getName=function t(e){var n=\"\";if(e instanceof Function){if(e.name)return e.name;var r=e.toString().match(i);r&&(n=r[1])}else e&&e.constructor instanceof Function&&(n=t(e.constructor));return n};var i=/function\\s+([^\\s(]+)/},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=function(){return new s};var i,r=(i=n(1))&&i.__esModule?i:{default:i};function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),this.position=new r.default,this._absPosition=new r.default,this.__init()}var e,n,i;return e=t,(n=[{key:\"__init\",value:function(){this.position.clear(),this._absPosition.clear(),this.rotation=0,this.scale=1,this.parent=null}},{key:\"absPosition\",value:function(){var t=this._absPosition.assign(this.position);if(!this.parent)return t;var e=this.parent;return t.rotate(e.absRotation()).smult(e.absScale()).add(e.absPosition()),t}},{key:\"absRotation\",value:function(){return this.parent?(this.rotation+this.parent.absRotation())%(2*Math.PI):this.rotation}},{key:\"absScale\",value:function(){return this.parent?this.scale*this.parent.absScale():this.scale}}])&&a(e.prototype,n),i&&a(e,i),t}()},function(t,e,n){\"use strict\";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t){throw new Error('\"'+t+'\" is read-only')}Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=void 0;var a=0,s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),this.id=(r(\"nextId\"),a++),this._manager=null,this._Components=[],this._tags=[]}var e,n,s;return e=t,(n=[{key:\"__init\",value:function(){this.id=(r(\"nextId\"),a++),this._manager=null,this._Components.length=0,this._tags.length=0}},{key:\"addComponent\",value:function(t){return this._manager.entityAddComponent(this,t),this}},{key:\"removeComponent\",value:function(t){return this._manager.entityRemoveComponent(this,t),this}},{key:\"hasComponent\",value:function(t){return!!~this._Components.indexOf(t)}},{key:\"removeAllComponents\",value:function(){return this._manager.entityRemoveAllComponents(this)}},{key:\"hasAllComponents\",value:function(t){for(var e=!0,n=0;n<t.length;n++){var i=t[n];e&=!!~this._Components.indexOf(i)}return e}},{key:\"hasTag\",value:function(t){return!!~this._tags.indexOf(t)}},{key:\"addTag\",value:function(t){return this._manager.entityAddTag(this,t),this}},{key:\"removeTag\",value:function(t){return this._manager.entityRemoveTag(this,t),this}},{key:\"trigger\",value:function(t,e){this._manager.trigger(t,this,e)}},{key:\"remove\",value:function(){return this._manager.removeEntity(this)}}])&&i(e.prototype,n),s&&i(e,s),t}();e.default=s},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.mixin_=function(t,e){if(e instanceof Function){for(var n in e)t[n]=e[n];e=e.prototype}for(var i in e)e.hasOwnProperty(i)&&(t.prototype[i]=e[i])}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.getArguments=function(t){var e=[],n=t.toString().match(i);if(n){n=n[1].replace(/[ ]*,[ ]*/,\",\").split(\",\");for(var r=0;r<n.length;r++){var a=n[r].replace(/^\\s+|\\s+$/g,\"\");a&&e.push(a)}}return e};var i=/^\\w*function[^\\(]*\\(([^\\)]+)/},function(t,e,n){\"use strict\";function i(t){return function(){this.constructor=t}}Object.defineProperty(e,\"__esModule\",{value:!0}),e.extends_=function(t,e){if(\"function\"==typeof e.extend){var n={};for(var r in t.prototype)n[r]=t.prototype[r];return n.constructor=t,e.extend(n),void(t.Super=e)}for(var a in e)!t.hasOwnProperty(a)&&e.hasOwnProperty(a)&&(t[a]=e[a]);if(t.Super=e,Object.create instanceof Function)t.prototype=Object.create(e.prototype,{constructor:{value:t}});else{var s=i(t);s.prototype=e.prototype,t.prototype=new s}return t},e.makeT=i},function(t,e,n){\"use strict\";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=void 0;var r=function(){function t(e,n,i,r){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),this.x=e,this.y=n,this.w=i,this.h=r}var e,n,r;return e=t,(n=[{key:\"draw\",value:function(t,e){t.beginPath(),t.rect(this.x,this.y,this.w,this.h),t.strokeStyle=e,t.stroke()}},{key:\"pointTest\",value:function(t,e){var n,i;return 1==arguments.length&&(n=t.x,i=t.y),n>=this.x&&n<=this.x+this.w&&i>=this.y&&i<=this.y+this.h}},{key:\"rectangleTest\",value:function(t){return this.x<t.x+t.w&&this.x+this.w>t.x&&this.y<t.y+t.h&&this.y+this.h>t.y}}])&&i(e.prototype,n),r&&i(e,r),t}();e.default=r},function(t,e,n){\"use strict\";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=void 0;var r=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),this.x=e,this.y=n}var e,n,r;return e=t,(n=[{key:\"draw\",value:function(t,e,n){t.beginPath(),t.arc(this.x,this.y,n,0,2*Math.PI,!0),t.fillStyle=e,t.fill(),t.strokeStyle=e,t.stroke()}}])&&i(e.prototype,n),r&&i(e,r),t}();e.default=r},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=void 0;var i=a(n(2)),r=a(n(1));function a(t){return t&&t.__esModule?t:{default:t}}function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var o=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),this.x=e,this.y=n,this.radius=r,this.radiusLine=new i.default(this.x,this.y,this.radius,0)}var e,n,a;return e=t,(n=[{key:\"pointTest\",value:function(t,e){var n,r;return 1==arguments.length&&(n=t.x,r=t.y),new i.default(this.x,this.y,n-this.x,r-this.y).length()<=this.radiusLine.length()}},{key:\"circleTest\",value:function(t){return new i.default(this.x,this.y,t.x-this.x,t.y-this.y).length()<=this.radiusLine.length()+t.radiusLine.length()}},{key:\"segmentTest\",value:function(t){var e=new i.default(100,100,this.x-100,this.y-100).project(t),n=new i.default(100,100,e.x,e.y),a=new i.default(this.x,this.y,n.x+n.vecX-this.x,n.y+n.vecY-this.y);if(this.pointTest(t.x+t.vecX,t.y+t.vecY))return!0;if(this.pointTest(t.x,t.y))return!0;if(a.length()<=this.radiusLine.length()&&t.length()>=n.length()){var s=new r.default(t.vecX,t.vecY);if(0<=new r.default(n.vecX,n.vecY).dot(s))return!0}}},{key:\"draw\",value:function(t,e){t.beginPath(),t.arc(this.x,this.y,this.radius,0,2*Math.PI,!0),t.fillStyle=e,t.fill(),t.strokeStyle=e,t.stroke(),this.radiusLine.x=this.x,this.radiusLine.y=this.y,this.radiusLine.vecX=this.radius,this.radiusLine.draw(\"blue\",t)}}])&&s(e.prototype,n),a&&s(e,a),t}();e.default=o},function(t,e,n){\"use strict\";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=void 0;var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),this.keyState=new Map,this.keyMap=new Map,this.key={enter:13,up:38,down:40,left:37,right:39,escape:27,spacebar:32,ctl:17,alt:18,tab:9,shift:16,caps:20,lwin:91,rwin:92,backspace:8,home:36,end:35,insert:45,del:46,pageUp:33,pageDown:34,numLock:144,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f8:119,f9:120,f10:121,f11:122,f12:123,printScreen:44,scrollLock:145,pauseBreak:19,a0:48,a1:49,a2:50,a3:51,a4:52,a5:53,a6:54,a7:55,a8:56,a9:57,n0:96,n1:97,n2:98,n3:99,n4:100,n5:101,n6:102,n7:103,n8:104,n9:105,multiply:106,add:107,subtract:109,decimal:110,divide:111,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,semiColon:186,equals:187,comma:188,dash:189,period:190,forwardSlash:191,graveAccent:192,openBracket:219,backslash:220,closeBracket:221,singleQuote:222}}var e,n,r;return e=t,(n=[{key:\"addMapping\",value:function(t,e){this.keyMap.set(t,e)}},{key:\"handleEvent\",value:function(t){var e=t.keyCode;if(this.keyMap.has(e)){t.preventDefault();var n=\"keydown\"===t.type?1:0;this.keyState.get(e)!==n&&(this.keyState.set(e,n),this.keyMap.get(e)(n))}}},{key:\"listenTo\",value:function(t){var e=this;[\"keydown\",\"keyup\"].forEach(function(n){t.addEventListener(n,function(t){e.handleEvent(t)})})}}])&&i(e.prototype,n),r&&i(e,r),t}();e.default=r},function(t,e,n){\"use strict\";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=void 0;var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),this.x=0,this.y=0,this.ctx=e}var e,n,r;return e=t,(n=[{key:\"handle\",value:function(t){var e=this;this.ctx.canvas.addEventListener(\"mousemove\",function(n){e.x=n.clientX,e.y=n.clientY,t(n)}),this.x=e.x,this.y=e.y}}])&&i(e.prototype,n),r&&i(e,r),t}();e.default=r},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=void 0;var i,r=(i=n(4))&&i.__esModule?i:{default:i};function a(t){return(a=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var o=function(){function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),a(n)==String?(this.img=new Image,this.img.src=n):this.img=n,this.ctx=e.ctx,this.x=0,this.y=0,this.delay=0,this.indexCounter=0,this.curFrame=0,i&&(this.pattern=ctx.createPattern(this.img,\"repeat\"))}var e,n,i;return e=t,(n=[{key:\"draw\",value:function(t,e,n,i){this.x=t,this.y=e,null!=this.pattern?(this.ctx.fillStyle=this.pattern,this.ctx.fillRect(t,e,n,i)):void 0==n||void 0==i?this.ctx.drawImage(this.img,this.x,this.y,this.img.width,this.img.height):this.ctx.drawImage(this.img,this.x,this.y,n,i)}},{key:\"rotate\",value:function(t,e,n){this.x=t,this.y=e,this.ctx.save(),this.ctx.translate(this.x,this.y),this.ctx.rotate(n*r.default.deg2rad()),this.ctx.drawImage(this.img,-this.img.width/2,-this.img.height/2),this.ctx.restore()}},{key:\"animation\",value:function(t,e,n,i,a,s,o){var u=void 0==o?3:o;this.delay++>=u&&(this.delay=0,this.indexCounter++,this.indexCounter>=n.length&&(this.indexCounter=0),this.curFrame=n[this.indexCounter]);var h=r.default.i2xy(this.curFrame,i);this.ctx.drawImage(this.img,h.x*a,h.y*s,a,s,t,e,a,s)}}])&&s(e.prototype,n),i&&s(e,i),t}();e.default=o},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=void 0;i(n(5)),i(n(9));function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var a=\"screen\",s=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),this.canvas,this.ctx,this.width=0,this.height=0,this.running=!1,void 0!=e)if(this.options=e,void 0!=this.options.screen?this.canvas=document.getElementById(this.options.screen):this.canvas=document.getElementById(a),void 0!=this.options.scale?(this.width=this.options.scale.x,this.height=this.options.scale.y):(this.width=window.innerWidth,this.height=window.innerHeight),void 0!=this.options.renderer)switch(this.options.renderer){case\"canvas\":this.ctx=this.canvas.getContext(\"2d\");break;case\"webgl\":this.ctx=this.canvas.getContext(\"webgl\")}else this.ctx=this.canvas.getContext(\"2d\");else this.width=window.innerWidth,this.height=window.innerHeight,this.canvas=document.getElementById(a),this.ctx=this.canvas.getContext(\"2d\");this.canvas.width=this.width,this.canvas.height=this.height}var e,n,i;return e=t,(n=[{key:\"clear\",value:function(t){this.ctx.beginPath(),this.ctx.rect(0,0,this.width,this.height),this.ctx.fillStyle=t||\"#fff\",this.ctx.fill()}},{key:\"init\",value:function(t){this.options&&this.options.resize&&(this.resize(),this.initResize()),t()}},{key:\"initResize\",value:function(){var t=document.createElement(\"style\"),e=void 0!=this.options&&void 0!=this.options.container?this.options.container:\"container\";t.innerHTML=\"#\"+e+\"{position: absolute;left:50%; top: 50%;width: 100%;height: 100%;outline: 1px solid black;}\",document.body.appendChild(t),window.addEventListener(\"resize\",this.resize,!1),window.addEventListener(\"orientationchange\",this.resize,!1)}},{key:\"resize\",value:function(){var t=void 0!=this.options&&void 0!=this.options.container?this.options.container:\"container\",e=document.getElementById(t),n=window.innerWidth,i=window.innerHeight;n/i>4/3?(n=i*(4/3),e.style.height=i+\"px\",e.style.width=n+\"px\"):(i=n/(4/3),e.style.width=n+\"px\",e.style.height=i+\"px\"),e.style.marginTop=-i/2+\"px\",e.style.marginLeft=-n/2+\"px\";var r=document.getElementById(a);r.width=n,r.height=i}}])&&r(e.prototype,n),i&&r(e,i),t}();e.default=s},function(t,e,n){\"use strict\";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=void 0;var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),this.layers=[]}var e,n,r;return e=t,(n=[{key:\"draw\",value:function(t){this.layers.forEach(function(e){e(t)})}}])&&i(e.prototype,n),r&&i(e,r),t}();e.default=r},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=void 0;var i;(i=n(6))&&i.__esModule;e.default=function t(e,n,i,r,a){return function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),this.img=e,this.buffer=document.createElement(\"canvas\"),this.buffer.width=r,this.buffer.height=a,void 0!=r&&void 0!=a?(this.width=r,this.height=a):(this.width=e.width,this.height=e.height),this.buffer.getContext(\"2d\").drawImage(this.img,n,i,this.width,this.height,0,0,this.width,this.height),this.buffer}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.componentPropertyName=c,e.groupKey=f,e.Group=y,e.default=void 0;var i=o(n(12)),r=o(n(0)),a=(o(n(!function(){var t=new Error(\"Cannot find module './messenger'\");throw t.code=\"MODULE_NOT_FOUND\",t}())),o(n(11))),s=n(10);function o(t){return t&&t.__esModule?t:{default:t}}function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var h={ENTITY_CREATED:\"EntityManager#ENTITY_CREATED\",ENTITY_REMOVE:\"EntityManager#ENTITY_REMOVE\",COMPONENT_ADDED:\"EntityManager#COMPONENT_ADDED\",COMPONENT_REMOVE:\"EntityManager#COMPONENT_REMOVE\"},l=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),this.messenger=e,this._tags={},this._entities=[],this._groups={},this._entityPool=new r.default(i.default),this._componentPools={}}var e,n,s;return e=t,(n=[{key:\"createEntity\",value:function(){var t=this._entityPool.aquire();return this._entities.push(t),t._manager=this,this._trigger(h.ENTITY_CREATED,t),t}},{key:\"create\",value:function(){return this.createEntity().addComponent(a.default)}},{key:\"removeEntitiesByTag\",value:function(t){var e=this._tags[t];if(e)for(var n=e.length-1;n>=0;n--){e[n].remove()}}},{key:\"removeAllEntities\",value:function(){for(var t=this._entities.length-1;t>=0;t--)this._entities[t].remove()}},{key:\"remove\",value:function(t){var e=this._entities.indexOf(t);if(!~e)throw new Error(\"Tried to remove entity not in list\");for(var n in this.entityRemoveAllComponents(t),this._trigger(h.ENTITY_REMOVE,t),this._entities.splice(e,1),t._tags.length=0,this._tags){var i=this._tags[n],r=i.indexOf(t);~r&&i.splice(r,1)}t._manager=null,this._entityPool.release(t)}},{key:\"entityAddTag\",value:function(t,e){var n=this._tags[e];n||(n=this._tags[e]=[]),~n.indexOf(t)||(n.push(t),t._tags.push(e))}},{key:\"entityRemoveTag\",value:function(t,e){var n=this._tags[e];if(n){var i=n.indexOf(t);~i&&(n.splice(i,1),t._tags.splice(t._tags.indexOf(e),1))}}},{key:\"entityAddComponent\",value:function(t,e){if(!~t._Components.indexOf(e)){t._Components.push(e);var n=c(e),i=this._componentPools[n];i||(i=this._componentPools[n]=new r.default(e));var a=i.aquire();for(var s in t[n]=a,this._groups){var o=this._groups[s];~o.Components.indexOf(e)&&(t.hasAllComponents(o.Components)&&(~o.entities.indexOf(t)||o.entities.push(t)))}this._trigger(h.COMPONENT_ADDED,t,e)}}},{key:\"entityRemoveAllComponents\",value:function(t){for(var e=t._Components,n=e.length-1;n>=0;n--){var i=e[n];t.removeComponent(i)}}},{key:\"entityRemoveComponent\",value:function(t,e){var n=t._Components.indexOf(e);if(~n){for(var i in this._trigger(h.COMPONENT_REMOVE,t,e),this._groups){var r=this._groups[i];if(~r.Components.indexOf(e)&&t.hasAllComponents(r.Components)){var a=r.entities.indexOf(t);~a&&r.entities.splice(a,1)}}var s=c(e);t._Components.splice(n,1);var o=t[s];delete t[s],this._componentPools[s].release(o)}}},{key:\"queryComponents\",value:function(t){var e=this._groups[f(t)];return e||(e=this._indexGroup(t)),e.entities}},{key:\"queryTag\",value:function(t){var e=this._tags[t];return void 0===e&&(e=this._tags[t]=[]),e}},{key:\"count\",value:function(){return this._entities.length}},{key:\"poolStats\",value:function(){var t={};this._entityPool;for(var e in t.entity={used:this._entityPool.totalUsed(),size:this._entityPool.count},this._componentPools){var n=this._componentPools[e];t[e]={used:n.totalUsed(),size:n.count}}return t}},{key:\"_indexGroup\",value:function(t){var e=f(t);if(!this._groups[e]){for(var n=this._groups[e]=new y(t),i=0;i<this._entities.length;i++){var r=this._entities[i];r.hasAllComponents(t)&&n.entities.push(r)}return n}}},{key:\"_trigger\",value:function(t,e,n){this.messenger&&this.messenger.trigger(t,e,n)}}])&&u(e.prototype,n),s&&u(e,s),t}();function c(t){var e=(0,s.getName)(t);return e.charAt(0).toLowerCase()+e.slice(1)}function f(t){for(var e=[],n=0;n<t.length;n++){var i=t[n];e.push((0,s.getName)(i))}return e.map(function(t){return t.toLowerCase()}).sort().join(\"-\")}function y(t,e){this.Components=t||[],this.entities=e||[]}e.default=l},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=void 0;var i=E(n(12)),r=E(n(25)),a=E(n(9)),s=E(n(11)),o=E(n(24)),u=E(n(23)),h=E(n(22)),l=E(n(5)),c=E(n(21)),f=E(n(6)),y=E(n(20)),d=E(n(19)),v=E(n(4)),p=E(n(1)),g=E(n(18)),m=E(n(17)),_=E(n(16)),w=E(n(2)),x=E(n(7)),b=E(n(15)),k=E(n(14)),C=E(n(10)),P=E(n(8)),O=E(n(13)),T=E(n(0));function E(t){return t&&t.__esModule?t:{default:t}}var M={core:{}};M.core.entity=i.default,M.core.entityManager=r.default,M.core.loop=a.default,M.core.transform=s.default,M.graphics={},M.graphics.buffer=o.default,M.graphics.compositor=u.default,M.graphics.display=h.default,M.graphics.resources=l.default,M.graphics.sprite=c.default,M.graphics.slice=f.default,M.input={},M.input.mouse=y.default,M.input.keyboard=d.default,M.math={},M.math.mathf=v.default,M.math.vec2=p.default,M.physics={},M.physics.circle=g.default,M.physics.point=m.default,M.physics.rectangle=_.default,M.physics.segment=w.default,M.utils={},M.utils.event=x.default,M.utils.extends=b.default,M.utils.getArguments=k.default,M.utils.getName=C.default,M.utils.messenger=P.default,M.utils.mixin=O.default,M.utils.objectPool=T.default;var j=M;e.default=j}]);","extractedComments":[]}