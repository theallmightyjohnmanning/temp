<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: ObjectPool.js</title>
    
    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">
    
    <h1 class="page-title">Source: ObjectPool.js</h1>
    
    


    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>module.exports = ObjectPool;

/**
 * @constructor
 * @param {Function} T
 */
function ObjectPool(T)
{
  this.freeList = [];
  this.count    = 0;
  this.T        = T;
}

/**
 * Get a pooled object
 */
ObjectPool.prototype.aquire = function()
{
  // Grow the list by 20%ish if we're out
  if (this.freeList.length &lt;= 0) {
    this.expand(Math.round(this.count*0.2) + 1);
  }

  var item = this.freeList.pop();

  // We can provide explicit initing, otherwise re-call constructor (hackish)
  if (item.__init)
    item.__init();
  else
    this.T.call(item);

  return item;
};

/**
 * Return an object back to the pool.
 */
ObjectPool.prototype.release = function(item)
{
  this.freeList.push(item);
};

/**
 * @param {Number} Amount of new objects to allocate for this pool.
 */
ObjectPool.prototype.expand = function(count)
{
  for (var n = 0; n &lt; count; n++)
    this.freeList.push(new this.T());
  this.count += count;
};

/**
 * @return {Number} Total amount of allocated objects (available and in-use).
 */
ObjectPool.prototype.totalSize = function()
{
  return this.count;
};

/**
 * @return {Number} Total number of objects currently available.
 */
ObjectPool.prototype.totalFree = function()
{
  return this.freeList.length;
};

/**
 * @return {Number} Total number of objects currently in-use.
 */
ObjectPool.prototype.totalUsed = function()
{
  return this.count - this.freeList.length;
};


</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Classes</h3><ul><li><a href="Entity.html">Entity</a></li><li><a href="EntityManager.html">EntityManager</a></li><li><a href="Group.html">Group</a></li><li><a href="ObjectPool.html">ObjectPool</a></li><li><a href="QuadTree.html">QuadTree</a></li><li><a href="Spatial.html">Spatial</a></li><li><a href="Vec2.html">Vec2</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-alpha3</a> on Wed Jan 29 2014 01:06:20 GMT-0600 (CST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
